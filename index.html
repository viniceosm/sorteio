<html>
    <body>
        
    </body>

    <script type="module">
        import { request } from "https://cdn.pika.dev/@octokit/request";

        var token = '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';
        var content = 'vinicius;1';

        /*const octokit = new Octokit({
            auth: token
        });*/
        
        window.addEventListener("load", (event) => {
            uploadFileApi(token, content);
        });

        async function uploadFileApi(token, content) {
            /*var data = JSON.stringify({
                "message": "csv file",
                "content": `${content}`
            });

            var config = {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: data
            };

            fetch('https://api.github.com/repos/viniceosm/sorteio/contents/abc.csv', config)
                .then(response => response.json());*/

            await request('PUT /repos/viniceosm/sorteio/contents/abc.csv', {
                headers: {
                    authorization: `token ${token}`
                },
                owner: 'viniceosm',
                repo: 'sorteio',
                path: 'abc',
                message: 'Alterando database',
                committer: {
                    name: 'viniceosm',
                    email: 'miiller.vini@gmail.com'
                },
                content: content
            });
        }
    </script>
</html>