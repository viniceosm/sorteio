<html>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rest.js/15.2.4/octokit-rest.min.js" integrity="sha512-LfdKEbVdMsZhLSXKajtzVD6Br/F7OhsMP8fiWWtf7h3NNmVnbE3PIR1Q9CP0VYMEFtQ1RqNa30s19pcsh4Z88Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <body>
        
    </body>

    <script>
        var token = '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';
        var content = 'vinicius;1';

        const octokit = new Octokit({
            auth: token
        });
        
        window.addEventListener("load", (event) => {
            uploadFileApi(token, content);
        });

        async function uploadFileApi(token, content) {
            /*var data = JSON.stringify({
                "message": "csv file",
                "content": `${content}`
            });

            var config = {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: data
            };

            fetch('https://api.github.com/repos/viniceosm/sorteio/contents/abc.csv', config)
                .then(response => response.json());*/

            await octokit.request('PUT /repos/viniceosm/sorteio/contents/abc.csv', {
                owner: 'viniceosm',
                repo: 'sorteio',
                path: 'abc',
                message: 'Alterando database',
                committer: {
                    name: 'viniceosm',
                    email: 'miiller.vini@gmail.com'
                },
                content: content
            })

        }
    </script>
</html>